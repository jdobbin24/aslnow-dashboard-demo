<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Site - ASL Now Widget</title>
    
    <!-- ASL Now Widget Embed Code (GitHub Pages Version) -->
    <script>
        // Static widget configuration for demo purposes
        (function() {
            'use strict';
            
            // Static widget configuration (will be modified by version switcher)
            const staticWidgetData = {
                theme: {
                    // Version 1 (Original) Configuration
                    tab_text: 'ASL Now',
                    asl_button_text: 'ASL Chat',
                    text_chat_button_text: 'Text Chat',
                    tab_background_color: '#007cba',
                    tab_text_color: '#ffffff',
                    primary_color: '#007cba',
                    secondary_color: '#005a8b',
                    button_text_color: '#ffffff',
                    position: 'bottom-right',
                    widget_type: 'ca_connect', // Original widget type
                    
                    // Version 2 (Enhanced) Configuration (will be added when switching)
                    asl_now_header_text: 'ASL Customer Service',
                    asl_now_description: 'Connect with our representative via live video in ASL or text chat for immediate assistance.',
                    video_chat_button_text: 'Video Chat',
                    show_logos: false, // Start with no logo
                    logo_image_path: 'uploads/logos/test-logo.png',
                    video_file_path: 'uploads/videos/test-video.mp4'
                },
                organization: {
                    name: 'ASL Now Demo'
                }
            };
            
            let widgetElement = null;
            let isWidgetOpen = false;
            
            // Create widget HTML structure for Version 2
            function createWidget() {
                const theme = staticWidgetData.theme || {};
                const org = staticWidgetData.organization || {};
                
                // Determine widget type
                if (theme.widget_type === 'asl_now') {
                    createWidgetVersion2();
                } else {
                    createWidgetVersion1();
                }
            }
            
            // Create widget HTML structure for Version 1 (original)
            function createWidgetVersion1() {
                const theme = staticWidgetData.theme || {};
                const org = staticWidgetData.organization || {};
            
                // Create widget container
                widgetElement = document.createElement('div');
                widgetElement.id = 'asl-now-widget';
                widgetElement.innerHTML = `
                    <div class="widget-tab" id="widget-tab">
                        <span class="widget-title">${theme.tab_text || 'ASL Now'}</span>
                        <button class="widget-close" id="widget-close" style="display: none;">&times;</button>
                    </div>
                    <div class="widget-panel" id="widget-panel">
                        <div class="widget-content">
                            <div class="widget-buttons">
                                <button class="widget-btn asl-btn" id="asl-btn">
                                    <svg class="dcaslchaticon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 49.5" style="width: 24px; height: 24px;"><path d="M44.6 23.9c1.3-0.9 2.1-2.3 2.1-3.9 0-2.6-2.1-4.8-4.8-4.8s-4.8 2.1-4.8 4.8c0 2.2 1.5 4.1 3.6 4.6 -2.5 1.2-4.3 3.9-4.3 6.9l-0.1 3.4 11-4.9C47.4 29.9 47.8 24.8 44.6 23.9z" /></svg>
                                    <span>${theme.asl_button_text || 'ASL Chat'}</span>
                                </button>
                                <button class="widget-btn text-chat-btn" id="text-chat-btn">
                                    <svg class="dctextchaticon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 49.5" style="width: 24px; height: 24px;"><path d="M59.1 3.7L43.8 9.2c-1.1 0.4-1.7 1.8-1.1 2.8l0 0c0.5 0.9 1.5 1.3 2.5 1l12.6-4.6v21.7l-2.2 1c-0.7 0.3-1.2 1.1-1.2 1.9l0 4.4 -3.4-2.9c-0.6-0.5-1.5-0.6-2.2-0.3l-11.2 5.4L36 40.4v-3.5 -1.1h1c0.2 0 0.5-0.1 0.6-0.3 0.1-0.1 0.1-0.1 0.1-0.2 0.1-0.1 0.1-0.3 0.1-0.4 0-0.1-0.1-0.3-0.1-0.4 0 0 0 0 0 0l-3.2-4.7c-0.1-0.2-0.3-0.3-0.5-0.3 -0.1-0.1-0.3-0.1-0.4-0.1 -0.3 0-0.5 0.2-0.7 0.4l-2.9 4.7c0 0.1-0.1 0.2-0.1 0.3 0 0.2 0 0.4 0.1 0.6 0.1 0.2 0.4 0.4 0.6 0.4 0.1 0 0.2 0.1 0.3 0.1h0.9v2.5 5.3c0 0.4 0.1 0.9 0.4 1.2 0.3 0.4 0.8 0.7 1.2 0.8 0.2 0.1 0.4 0.1 0.6 0.1 0.3 0 0.6-0.1 0.9-0.2l14.5-7.1 5.8 4.9c0.7 0.6 1.8 0.7 2.6 0 0.5-0.4 0.7-1 0.7-1.6l-0.1-7.4 2.2-1c0.7-0.3 1.2-1 1.2-1.8V5.7c0-0.4-0.1-0.8-0.3-1.1C61 3.7 60 3.4 59.1 3.7z" /></svg>
                                    <span>${theme.text_chat_button_text || 'Text Chat'}</span>
                                </button>
                            </div>
                            <div class="widget-support-link" style="margin-top:16px;text-align:center;">
                                <a href="https://aslnow.com/tech-support/" target="_blank" style="color:#007cba;text-decoration:underline;font-size:14px;">
                                    Can't Connect?
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                
                // Apply positioning and styling
                const position = theme.position || 'bottom-right';
                widgetElement.className = `asl-widget asl-widget-${position}`;
                injectCSS(theme, org);
                document.body.appendChild(widgetElement);
                initializeAttentionAnimation();
            }
            
            // Create widget HTML structure for Version 2 (with video and logo)
            function createWidgetVersion2() {
                const theme = staticWidgetData.theme || {};
                const org = staticWidgetData.organization || {};
                
                // Build video element if video file path exists
                const videoElement = theme.video_file_path ? 
                    `<div class="widget-video">
                        <video width="100%" height="180" autoplay muted loop>
                            <source src="${theme.video_file_path}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>` : '';
                
                // Create widget container
                widgetElement = document.createElement('div');
                widgetElement.id = 'asl-now-widget';
                widgetElement.innerHTML = `
                    <div class="widget-tab" id="widget-tab">
                        <span class="widget-title">${theme.asl_now_header_text || 'ASL Now'}</span>
                        <button class="widget-close" id="widget-close" style="display: none;">&times;</button>
                    </div>
                    <div class="widget-panel" id="widget-panel">
                        <div class="widget-content">
                            <div class="widget-header-title">
                                ${theme.show_logos && theme.logo_image_path ? `<img src="${theme.logo_image_path}" alt="Logo" style="max-height: 30px; display: block; margin: 0 auto 10px;" />` : ''}
                                <h3 style="margin: 0 0 10px 0; text-align: center; color: #333;">${theme.asl_now_header_text || 'ASL Customer Service'}</h3>
                            </div>
                            ${videoElement}
                            <div class="widget-description" style="text-align: center; margin: 15px 0; color: #666; font-size: 14px; line-height: 1.4;">
                                ${theme.asl_now_description || 'You can connect with our representative via live video in ASL or via text chat.'}
                            </div>
                            <div class="widget-buttons">
                                <button class="widget-btn video-chat-btn" id="video-chat-btn">
                                    <svg class="video-chat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width: 24px; height: 24px;">
                                        <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
                                    </svg>
                                    <span>${theme.video_chat_button_text || 'Video Chat'}</span>
                                </button>
                                <button class="widget-btn text-chat-btn" id="text-chat-btn-v2">
                                    <svg class="text-chat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width: 24px; height: 24px;">
                                        <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                                    </svg>
                                    <span>${theme.text_chat_button_text || 'Text Chat'}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Apply positioning and styling
                const position = theme.position || 'bottom-right';
                widgetElement.className = `asl-widget asl-widget-${position} version-2`;
                injectCSS(theme, org);
                document.body.appendChild(widgetElement);
                initializeAttentionAnimation();
            }
            
            function initializeAttentionAnimation() {
                // Initialize attention animation
                setTimeout(() => {
                    const tab = document.getElementById('widget-tab');
                    if(tab && !isWidgetOpen) tab.classList.add('tab-attention');
                }, 100);
            }
            
            // Inject widget styles
            function injectCSS(theme, org) {
                const css = `
                    .asl-widget {
                        position: fixed;
                        z-index: 999999;
                        font-family: Arial, sans-serif;
                    }
                    
                    .asl-widget-bottom-right {
                        bottom: 20px;
                        right: 20px;
                    }
                    
                    .asl-widget-bottom-left {
                        bottom: 20px;
                        left: 20px;
                    }
                    
                    .asl-widget-top-right {
                        top: 20px;
                        right: 20px;
                    }
                    
                    .asl-widget-top-left {
                        top: 20px;
                        left: 20px;
                    }
                    
                    .widget-tab {
                        display: flex;
                        align-items: center;
                        justify-content: space-around;
                        background-color: ${theme.tab_background_color || theme.primary_color || '#007cba'};
                        color: ${theme.tab_text_color || '#ffffff'};
                        padding: 12px 8px 12px 20px;
                        border-radius: 25px 25px 0 25px;
                        cursor: pointer;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                        transition: all 0.3s ease;
                        user-select: none;
                        min-width: 140px;
                    }
                    
                    .widget-tab:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                    }
                    
                    .widget-title {
                        font-weight: bold;
                        font-size: 14px;
                    }
                    
                    .widget-close {
                        background: none;
                        border: none;
                        color: inherit;
                        font-size: 18px;
                        cursor: pointer;
                        margin-left: 10px;
                    }
                    
                    .widget-panel {
                        position: absolute;
                        bottom: 60px;
                        right: 0;
                        width: 300px;
                        background: white;
                        border-radius: 15px;
                        box-shadow: 0 5px 25px rgba(0,0,0,0.15);
                        display: none;
                        overflow: hidden;
                    }
                    
                    .widget-panel.open {
                        display: block;
                        animation: slideUp 0.3s ease-out;
                    }
                    
                    .widget-content {
                        padding: 20px;
                    }
                    
                    .widget-buttons {
                        display: flex;
                        flex-direction: column;
                        gap: 10px;
                    }
                    
                    .widget-btn {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        padding: 12px 16px;
                        background-color: ${theme.primary_color || '#007cba'};
                        color: ${theme.button_text_color || '#ffffff'};
                        border: none;
                        border-radius: 8px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 500;
                        transition: all 0.2s ease;
                    }
                    
                    .widget-btn:hover {
                        background-color: ${theme.secondary_color || '#005a8b'};
                        transform: translateY(-1px);
                    }
                    
                    .widget-btn svg {
                        fill: currentColor;
                        flex-shrink: 0;
                    }
                    
                    @keyframes slideUp {
                        from {
                            opacity: 0;
                            transform: translateY(20px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    
                    .tab-attention {
                        animation: pulse 2s infinite;
                    }
                    
                    @keyframes pulse {
                        0% { transform: scale(1); }
                        50% { transform: scale(1.05); }
                        100% { transform: scale(1); }
                    }
                    
                    @media (max-width: 768px) {
                        .asl-widget-bottom-right {
                            bottom: 10px;
                            right: 10px;
                        }
                        
                        .widget-panel {
                            width: 280px;
                        }
                    }
                `;
                
                // Inject CSS into page
                const style = document.createElement('style');
                style.textContent = css;
                document.head.appendChild(style);
            }
            
            // Event handlers
            function attachEventListeners() {
                const tab = document.getElementById('widget-tab');
                const panel = document.getElementById('widget-panel');
                const closeBtn = document.getElementById('widget-close');
                
                // Version 1 buttons
                const aslBtn = document.getElementById('asl-btn');
                const textChatBtn = document.getElementById('text-chat-btn');
                
                // Version 2 buttons
                const videoChatBtn = document.getElementById('video-chat-btn');
                const textChatBtnV2 = document.getElementById('text-chat-btn-v2');
                
                if (tab) {
                    tab.addEventListener('click', function() {
                        if (isWidgetOpen) {
                            closeWidget();
                        } else {
                            openWidget();
                        }
                    });
                }
                
                if (closeBtn) {
                    closeBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        closeWidget();
                    });
                }
                
                // Version 1 button handlers
                if (aslBtn) {
                    aslBtn.addEventListener('click', function() {
                        alert('ASL Chat functionality would connect to live ASL interpreter.');
                    });
                }
                
                if (textChatBtn) {
                    textChatBtn.addEventListener('click', function() {
                        alert('Text Chat functionality would open text-based chat.');
                    });
                }
                
                // Version 2 button handlers
                if (videoChatBtn) {
                    videoChatBtn.addEventListener('click', function() {
                        alert('Video Chat functionality would connect to live ASL interpreter via video call.');
                    });
                }
                
                if (textChatBtnV2) {
                    textChatBtnV2.addEventListener('click', function() {
                        alert('Text Chat functionality would open text-based support chat.');
                    });
                }
            }
            
            function openWidget() {
                const panel = document.getElementById('widget-panel');
                const closeBtn = document.getElementById('widget-close');
                const tab = document.getElementById('widget-tab');
                
                if (panel) panel.classList.add('open');
                if (closeBtn) closeBtn.style.display = 'inline';
                if (tab) tab.classList.remove('tab-attention');
                isWidgetOpen = true;
            }
            
            function closeWidget() {
                const panel = document.getElementById('widget-panel');
                const closeBtn = document.getElementById('widget-close');
                
                if (panel) panel.classList.remove('open');
                if (closeBtn) closeBtn.style.display = 'none';
                isWidgetOpen = false;
            }
            
            // Initialize widget when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    createWidget();
                    attachEventListeners();
                });
            } else {
                createWidget();
                attachEventListeners();
            }
        })();
    </script>
    <!-- End of ASL Now -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .content {
            line-height: 1.6;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
        }
        .footer {
            text-align: center;
            padding: 20px;
            background-color: #333;
            color: white;
            margin-top: 40px;
        }
        .widget-info {
            background-color: #e7f3ff;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .version-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .version-btn {
            padding: 10px 20px;
            border: 2px solid #007cba;
            background: white;
            color: #007cba;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .version-btn:hover {
            background: #007cba;
            color: white;
            transform: translateY(-1px);
        }
        
        .version-btn.active {
            background: #007cba;
            color: white;
        }
        
        .version-description {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 124, 186, 0.1);
            border-left: 4px solid #007cba;
            border-radius: 0 5px 5px 0;
        }
        
        .version-description.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Welcome to Our Test Website</h1>
            <p>This is a fake website to test the ASL Now accessibility widget</p>
        </div>

        <div class="content">
            <div class="section">
                <h2>About Our Company</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>

            <div class="section">
                <h2>Our Services</h2>
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                
                <ul>
                    <li>Web Development</li>
                    <li>Mobile Applications</li>
                    <li>Digital Marketing</li>
                    <li>Accessibility Solutions</li>
                </ul>
            </div>

            <div class="widget-info">
                <h3>🎛️ Widget Demo Controls</h3>
                <p><strong>Switch between widget versions:</strong></p>
                <div class="version-controls" style="margin: 15px 0;">
                    <button id="version1-btn" class="version-btn active">Version 1 (Original)</button>
                    <button id="version2-btn" class="version-btn">Version 2 (Enhanced)</button>
                </div>
                <div class="version-info">
                    <div id="v1-info" class="version-description active">
                        <strong>Version 1:</strong> Classic ASL Now widget with ASL Chat and Text Chat buttons.
                    </div>
                    <div id="v2-info" class="version-description">
                        <strong>Version 2:</strong> Enhanced widget with logo, video background, and Video Chat functionality.
                    </div>
                </div>
            </div>
            
            <div class="widget-info" style="background-color: #f0f8ff;">
                <h3>🔧 Technical Implementation</h3>
                <p><strong>For developers:</strong></p>
                <ol>
                    <li>Widget automatically detects configuration via API</li>
                    <li>Supports both static and dynamic configurations</li>
                    <li>Responsive design works on desktop and mobile</li>
                    <li>Easy to customize colors, text, and positioning</li>
                    <li>WCAG 2.2 Level AA compliant</li>
                </ol>
            </div>

            <div class="section">
                <h2>Contact Information</h2>
                <p>Feel free to reach out to us for more information about our services and accessibility solutions.</p>
                <p><strong>Email:</strong> contact@testsite.com<br>
                <strong>Phone:</strong> (555) 123-4567</p>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2025 Test Website. All rights reserved.</p>
    </div>

    <script>
        // Version switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            const version1Btn = document.getElementById('version1-btn');
            const version2Btn = document.getElementById('version2-btn');
            const v1Info = document.getElementById('v1-info');
            const v2Info = document.getElementById('v2-info');
            
            let currentWidgetType = 'asl_now'; // Start with version 2
            
            function switchToVersion1() {
                // Update button states
                version1Btn.classList.add('active');
                version2Btn.classList.remove('active');
                
                // Update descriptions
                v1Info.classList.add('active');
                v2Info.classList.remove('active');
                
                // Update widget configuration
                window.staticWidgetData.theme.widget_type = 'ca_connect';
                currentWidgetType = 'ca_connect';
                
                // Remove existing widget
                const existingWidget = document.getElementById('asl-now-widget');
                if (existingWidget) {
                    existingWidget.remove();
                }
                
                // Recreate widget with new version
                setTimeout(() => {
                    window.createWidget();
                    window.attachEventListeners();
                }, 100);
            }
            
            function switchToVersion2() {
                // Update button states
                version2Btn.classList.add('active');
                version1Btn.classList.remove('active');
                
                // Update descriptions
                v2Info.classList.add('active');
                v1Info.classList.remove('active');
                
                // Update widget configuration for Version 2
                window.staticWidgetData.theme.widget_type = 'asl_now';
                window.staticWidgetData.theme.show_logos = true; // Enable logo
                window.staticWidgetData.theme.video_file_path = 'uploads/videos/test-video.mp4'; // Enable video
                currentWidgetType = 'asl_now';
                
                // Remove existing widget
                const existingWidget = document.getElementById('asl-now-widget');
                if (existingWidget) {
                    existingWidget.remove();
                }
                
                // Recreate widget with new version
                setTimeout(() => {
                    window.createWidget();
                    window.attachEventListeners();
                }, 100);
            }
            
            // Add event listeners
            version1Btn.addEventListener('click', switchToVersion1);
            version2Btn.addEventListener('click', switchToVersion2);
            
            // Start in version 2 state but show version 1 as active initially
            version1Btn.classList.remove('active');
            version2Btn.classList.add('active');
            v1Info.classList.remove('active');
            v2Info.classList.add('active');
        });
    </script>

</body>
</html>
